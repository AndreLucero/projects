<div class="flex flex-col h-full">

    @if( chatService.currentConversation; as conversation ){

        <div class="flex justify-start items-center gap-2 p-4 shadow bg-gray-100 h-20 relative">
            <div
                class="h-12 w-12 p-2  rounded-full text-white font-semibold flex items-center justify-center"
                [class]="`bg-${ conversation.color }-500`"
            >{{ conversation.alias }}</div>
            <div class="font-bold text-xl">{{conversation.conversationName}}</div>
            <a [routerLink]="['/chatApp']" class="absolute right-0 top-0 px-2 py-1 hover:bg-red-500 hover:text-white text-gray-500">
                <svg class="" width="22" height="22" viewBox="0 0 16 16">
                    <path fill="none" stroke="currentColor" strokeLinecap="round" strokeLinejoin="round" strokeWidth="1.5" d="m11.25 4.75l-6.5 6.5m0-6.5l6.5 6.5"/>
                </svg>
            </a>
        </div>

        
        <div #messageContainer class="p-4 shadow grow overflow-y-auto scroll-smooth">
            @for( msg of conversation.messages; track $index ){
                <chat-message [message]="msg" [usersData]="chatService.participantsData" (iamRender)="scrollToBottom()" />
            }@empty {
                <p class="p-4 text-center text-gray-400 text-lg">No hay mensajes anteriores</p>
            }
        </div>
        
        <input-new-message />

    }@else {
        <div class="flex flex-col gap-10 items-center grow shadow">
        <p class="p-10 text-center text-gray-400 text-3xl">Uups!... Parece que la conversación que estas buscando no se encuentra disponible</p>
        <div class="h-full flex justify-center items-center">
            <a
                [routerLink]="['/chatApp']"
                class="py-4 px-10 rounded-full bg-violet-400 text-white w-fit cursor-pointer hover:bg-violet-500 active:scale-95"
            >Regresar al Menú</a>
        </div>
    </div>
    }

</div>